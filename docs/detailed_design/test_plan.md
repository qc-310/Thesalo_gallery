# テスト計画書 (Test Plan)

## 1. テストの目的 (Purpose)

本ドキュメントは、Thesalo Gallery アプリケーションの品質を担保するためのテスト計画（スケジュール、体制、範囲、判定基準）を定義するものである。技術的な実装詳細は「テスト仕様書 (`test_specification.md`)」に従う。

## 2. テスト対象・範囲 (Test Scope)

* **対象**: Thesalo Gallery バックエンド API および フロントエンド (Jinja2 Template)。
* **範囲**:
  * 機能要件: ユーザー認証、メディアアップロード、タイムライン表示、家族管理、検索機能。
  * 非機能要件: パフォーマンス (レスポンス速度)、セキュリティ (権限管理)。

## 3. テストレベル・フェーズ (Test Phases)

### Phase 1: 単体テスト (Unit Testing)

* **実施者**: 開発者
* **タイミング**: 実装時 (Commit前)
* **内容**: Service層、Model層のロジック検証。Mockを多用する。
* **完了条件**: 全ケースPass, カバレッジ80%以上。

### Phase 2: 結合テスト (Integration Testing)

* **実施者**: 開発者 / CI
* **タイミング**: PR作成時 (自動実行)
* **内容**: APIエンドポイントごとのブラックボックステスト。DBへの書き込みを含む一連の動作検証。
* **完了条件**: 全ケースPass。

### Phase 3: システムテスト (System Testing)

* **実施者**: QA / ユーザー
* **タイミング**: リリース前のStaging環境
* **内容**:
  * **E2Eシナリオ**: ログイン -> アップロード -> 加工完了確認 -> タイムライン閲覧 という一連のフロー。
  * **UI確認**: PC/SP表示崩れの確認。
  * **非同期処理**: 画像処理、AI検知が実際に動作するかの確認。

## 4. テスト環境 (Test Environment)

| 環境名 | 用途 | 構成 |
| :--- | :--- | :--- |
| **Local** | 単体・結合テスト | Docker Compose (Local DB) |
| **CI (GitHub)** | 自動テスト | Ubuntu Runner + Service Container (Postgres) |
| **Staging** | システムテスト | GCE (e2-micro) ※本番相当 |
| **Production** | 本番稼働 | GCE (e2-micro) |

## 5. スケジュール (Schedule)

1. **実装フェーズ**: 2024/01/01 - 2024/01/31
    * 単体・結合テストコードの実装を並行して行う。
2. **システムテストフェーズ**: 2024/02/01 - 2024/02/07
    * Staging環境へのデプロイと動作確認。
3. **リリース判定**: 2024/02/10

## 6. リリース判定基準 (Release Criteria)

1. すべての「Must」要件が実装されていること。
2. CI上の自動テスト (Unit/Integration) が全て成功していること。
3. 既知のCritical/Highバグが存在しないこと。
4. ユーザーによる受入テスト (UAT) が承認されていること。
