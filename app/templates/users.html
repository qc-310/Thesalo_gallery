{% extends "base.html" %}

{% block title %}„É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ - Thesalo Gallery{% endblock %}

{% block content %}
<div class="container" style="max-width: 900px;">
    <h2 style="margin-bottom: 24px;">„É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ</h2>

    <div class="card"
        style="background: var(--bg-primary); padding: 20px; border-radius: 12px; border: 1px solid var(--border-color); overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="border-bottom: 2px solid var(--border-color); text-align: left;">
                    <th style="padding: 12px; color: var(--text-secondary);">„É¶„Éº„Ç∂„Éº</th>
                    <th style="padding: 12px; color: var(--text-secondary);">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</th>
                    <th style="padding: 12px; color: var(--text-secondary);">ÁèæÂú®„ÅÆÂΩπÂâ≤</th>
                    <th style="padding: 12px; color: var(--text-secondary);">„Ç¢„ÇØ„Ç∑„Éß„É≥</th>
                </tr>
            </thead>
            <tbody>
                {% for u in users %}
                <tr style="border-bottom: 1px solid var(--border-color);">
                    <td style="padding: 12px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; overflow: hidden;">
                                {% if u.avatar_url %}
                                <img src="{{ u.avatar_url }}" style="width: 100%; height: 100%; object-fit: cover;">
                                {% else %}
                                <div
                                    style="width: 100%; height: 100%; background: #ccc; display: flex; align-items: center; justify-content: center;">
                                    üë§</div>
                                {% endif %}
                            </div>
                            <span style="font-weight: 500; color: var(--text-primary);">{{ u.name }}</span>
                        </div>
                    </td>
                    <td style="padding: 12px; color: var(--text-secondary); font-size: 14px;">{{ u.email }}</td>
                    <td style="padding: 12px;">
                        {% if u.role == 'owner' %}
                        <span class="badge"
                            style="background: #ef4444; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">„Ç™„Éº„Éä„Éº</span>
                        {% elif u.role == 'family' %}
                        <span class="badge"
                            style="background: #f59e0b; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">ÂÆ∂Êóè</span>
                        {% else %}
                        <span class="badge"
                            style="background: #3b82f6; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">„Ç≤„Çπ„Éà</span>
                        {% endif %}
                    </td>
                    <td style="padding: 12px;">
                        {% if u.role != 'owner' %}
                        <form action="{{ url_for('auth.update_role', uuid_id=u.id) }}" method="POST"
                            style="display: inline;">
                            {% if u.role == 'guest' %}
                            <button type="submit" name="role" value="family" class="btn btn-primary"
                                style="padding: 6px 12px; font-size: 13px;">ÂÆ∂Êóè„Å´„Åô„Çã</button>
                            {% else %}
                            <button type="submit" name="role" value="guest" class="btn btn-secondary"
                                style="padding: 6px 12px; font-size: 13px;">„Ç≤„Çπ„Éà„Å´Êàª„Åô</button>
                            {% endif %}
                        </form>
                        {% else %}
                        <span style="color: var(--text-secondary); font-size: 12px;">Â§âÊõ¥‰∏çÂèØ</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}